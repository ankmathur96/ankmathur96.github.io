<!DOCTYPE html>
<!-- saved from url=(0079)https://inst.eecs.berkeley.edu/~cs194-26/fa17/upload/files/proj6B/cs194-26-aey/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Ankit Mathur Website</title><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="description" content="Ankit Project"><meta property="og:site_name" content="Ankit Mathur Website"><meta property="og:title" content="Ankit Mathur Website"><meta property="og:type" content="article"><meta property="og:image" content="https://ankitmathurp6.carrd.co/assets/images/card.jpg?v43033399851151"><meta property="og:description" content="Ankit Project"><meta property="og:url" content="https://ankitmathurp6.carrd.co"><meta property="twitter:card" content="summary_large_image"><link href="./proj6_files/css" rel="stylesheet" type="text/css"><style>html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-collapse:collapse;border-spacing:0;}body{-webkit-text-size-adjust:none}mark{background-color:transparent;color:inherit}input::-moz-focus-inner{border:0;padding:0}input[type="text"],input[type="email"],select,textarea{-moz-appearance:none;-webkit-appearance:none;-ms-appearance:none;appearance:none}*, *:before, *:after {box-sizing: border-box;}body {min-width: 320px;min-height: 100vh;line-height: 1.0;word-wrap: break-word;overflow-x: hidden;}strong {color: inherit;font-weight: bolder;}em {font-style: italic;}code {font-family: "Lucida Console", "Courier New", monospace;font-weight: normal;text-indent: 0;letter-spacing: 0;font-size: 0.9em;margin: 0 0.25em;padding: 0.25em 0.5em;background-color: rgba(144,144,144,0.25);border-radius: 0.25em;}mark {background-color: rgba(144,144,144,0.25);}a {-moz-transition: color 0.25s ease, background-color 0.25s ease, border-color 0.25s ease;-webkit-transition: color 0.25s ease, background-color 0.25s ease, border-color 0.25s ease;-ms-transition: color 0.25s ease, background-color 0.25s ease, border-color 0.25s ease;transition: color 0.25s ease, background-color 0.25s ease, border-color 0.25s ease;color: inherit;text-decoration: underline;}s {text-decoration: line-through;}body:before {content: '';display: block;position: fixed;top: 0;left: 0;width: 100vw;height: 100vh;z-index: 0;-moz-pointer-events: none;-webkit-pointer-events: none;-ms-pointer-events: none;pointer-events: none;-moz-transform: scale(1);-webkit-transform: scale(1);-ms-transform: scale(1);transform: scale(1);background-image: linear-gradient(to top, rgba(0,0,0,0.91), rgba(0,0,0,0.91)), url('assets/images/bg.gif?v43033399851151');background-position: 0% 0%, center;background-repeat: repeat, no-repeat;background-size: auto, 100% 100%;background-attachment: scroll;background-color: #FFFFFF;}body:after {display: block;content: '';position: fixed;top: 0;left: 0;width: 100%;height: 100%;background-color: #000000;z-index: 1;opacity: 0;visibility: hidden;-moz-transition: opacity 1.5s ease-in-out 0s, visibility 1.5s 0s;-webkit-transition: opacity 1.5s ease-in-out 0s, visibility 1.5s 0s;-ms-transition: opacity 1.5s ease-in-out 0s, visibility 1.5s 0s;transition: opacity 1.5s ease-in-out 0s, visibility 1.5s 0s;-moz-transform: scale(1);-webkit-transform: scale(1);-ms-transform: scale(1);transform: scale(1);}body.is-loading:after {opacity: 1;visibility: visible;}html {font-size: 18pt;}#wrapper {-webkit-overflow-scrolling: touch;display: -moz-flex;display: -webkit-flex;display: -ms-flex;display: flex;-moz-flex-direction: column;-webkit-flex-direction: column;-ms-flex-direction: column;flex-direction: column;-moz-align-items: center;-webkit-align-items: center;-ms-align-items: center;align-items: center;-moz-justify-content: flex-start;-webkit-justify-content: flex-start;-ms-justify-content: flex-start;justify-content: flex-start;min-height: 100vh;position: relative;z-index: 2;overflow: hidden;}#main {display: -moz-flex;display: -webkit-flex;display: -ms-flex;display: flex;position: relative;max-width: 100%;z-index: 1;-moz-align-items: center;-webkit-align-items: center;-ms-align-items: center;align-items: center;-moz-justify-content: center;-webkit-justify-content: center;-ms-justify-content: center;justify-content: center;-moz-flex-grow: 0;-webkit-flex-grow: 0;-ms-flex-grow: 0;flex-grow: 0;-moz-flex-shrink: 0;-webkit-flex-shrink: 0;-ms-flex-shrink: 0;flex-shrink: 0;text-align: center;-moz-transition: opacity 1.5s ease-in-out 0s;-webkit-transition: opacity 1.5s ease-in-out 0s;-ms-transition: opacity 1.5s ease-in-out 0s;transition: opacity 1.5s ease-in-out 0s;}#main > .inner {position: relative;z-index: 1;border-radius: inherit;padding: 5rem 4rem;max-width: 100%;width: 87rem;}#main > .inner > * {margin-top: 1.5rem;margin-bottom: 1.5rem;}#main > .inner > :first-child {margin-top: 0 !important;}#main > .inner > :last-child {margin-bottom: 0 !important;}#main > .inner > .full {margin-left: calc(-4rem);width: calc(100% + 8rem + 0.4725px);max-width: calc(100% + 8rem + 0.4725px);}#main > .inner > .full:first-child {margin-top: -5rem !important;border-top-left-radius: inherit;border-top-right-radius: inherit;}#main > .inner > .full:last-child {margin-bottom: -5rem !important;border-bottom-left-radius: inherit;border-bottom-right-radius: inherit;}#main > .inner > .full.screen {width: 100vw;max-width: 100vw;position: relative;border-radius: 0 !important;left: 50%;right: auto;margin-left: -50vw;}body.is-loading #main {opacity: 0;}@-moz-keyframes deferred-spinner {0% {-moz-transform: rotate(0deg);-webkit-transform: rotate(0deg);-ms-transform: rotate(0deg);transform: rotate(0deg);}100% {-moz-transform: rotate(360deg);-webkit-transform: rotate(360deg);-ms-transform: rotate(360deg);transform: rotate(360deg);}}@-webkit-keyframes deferred-spinner {0% {-moz-transform: rotate(0deg);-webkit-transform: rotate(0deg);-ms-transform: rotate(0deg);transform: rotate(0deg);}100% {-moz-transform: rotate(360deg);-webkit-transform: rotate(360deg);-ms-transform: rotate(360deg);transform: rotate(360deg);}}@-ms-keyframes deferred-spinner {0% {-moz-transform: rotate(0deg);-webkit-transform: rotate(0deg);-ms-transform: rotate(0deg);transform: rotate(0deg);}100% {-moz-transform: rotate(360deg);-webkit-transform: rotate(360deg);-ms-transform: rotate(360deg);transform: rotate(360deg);}}@keyframes deferred-spinner {0% {-moz-transform: rotate(0deg);-webkit-transform: rotate(0deg);-ms-transform: rotate(0deg);transform: rotate(0deg);}100% {-moz-transform: rotate(360deg);-webkit-transform: rotate(360deg);-ms-transform: rotate(360deg);transform: rotate(360deg);}}.deferred:before {content: '';display: block;width: 4rem;height: 4rem;position: absolute;top: 50%;left: 50%;margin: -2rem 0 0 -2rem;-moz-animation: deferred-spinner 1s infinite linear;-webkit-animation: deferred-spinner 1s infinite linear;-ms-animation: deferred-spinner 1s infinite linear;animation: deferred-spinner 1s infinite linear;transition: opacity 0.25s ease;transition-delay: 0.5s;opacity: 0;z-index: -1;background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iOTZweCIgaGVpZ2h0PSI5NnB4IiB2aWV3Qm94PSIwIDAgOTYgOTYiIHpvb21BbmRQYW49ImRpc2FibGUiPjxzdHlsZT5jaXJjbGUge2ZpbGw6IHRyYW5zcGFyZW50OyBzdHJva2U6ICNmZmY7IHN0cm9rZS13aWR0aDogMS41cHg7IH08L3N0eWxlPjxkZWZzPjxjbGlwUGF0aCBpZD0iY29ybmVyIj48cG9seWdvbiBwb2ludHM9IjAsMCA0OCwwIDQ4LDQ4IDk2LDQ4IDk2LDk2IDAsOTYiIC8+PC9jbGlwUGF0aD48L2RlZnM+PGcgY2xpcC1wYXRoPSJ1cmwoI2Nvcm5lcikiPjxjaXJjbGUgY3g9IjQ4IiBjeT0iNDgiIHI9IjMyIi8+PC9nPjwvc3ZnPg==');background-position: center;background-repeat: no-repeat;background-size: 3rem;}.deferred.loading:before {opacity: 0.25;z-index: 0;}h1 br + br, h2 br + br, h3 br + br, p br + br {display: block;content: ' ';margin-top: 0.975rem;}h1 .li, h2 .li, h3 .li, p .li {display: list-item;padding-left: 0.5em;margin: 0.75em 0 0 1em;}#text02 br + br {margin-top: 0.825rem;}#text02 {font-family: 'Oswald';letter-spacing: 0.75rem;width: calc(100% + 0.75rem);font-size: 3.125em;line-height: 1.375;text-align: inherit;}#text14 br + br {margin-top: 0.825rem;}#text14 {font-family: 'Oswald';letter-spacing: 0.75rem;width: calc(100% + 0.75rem);font-size: 1.75em;line-height: 1.375;text-align: inherit;}#text01 {font-size: 1em;font-weight: 300;text-transform: none;text-align: inherit;}#text06 {font-size: 1.625em;font-weight: 400;text-transform: none;text-align: inherit;}#text10 {text-transform: none;text-align: inherit;}#text04 {font-size: 1.625em;font-weight: 400;text-transform: none;text-align: inherit;}#text09 {text-transform: none;text-align: inherit;}#text16 {font-size: 1.625em;font-weight: 400;text-transform: none;text-align: inherit;}#text08 {font-size: 1.25em;font-weight: 400;text-transform: none;text-align: inherit;}#text07 {font-size: 1.25em;font-weight: 400;text-transform: none;text-align: inherit;}#text03 {font-size: 1.25em;font-weight: 400;text-transform: none;text-align: inherit;}#text15 {text-transform: none;}#text11 br + br {margin-top: 0.825rem;}#text11 {font-family: 'Oswald';letter-spacing: 0.75rem;width: calc(100% + 0.75rem);font-size: 1.75em;line-height: 1.375;text-align: inherit;}#text13 {text-transform: none;}#text17 {font-size: 1.625em;font-weight: 400;text-transform: none;text-align: inherit;}#text18 {text-transform: none;}#text21 {font-size: 1.625em;font-weight: 400;text-transform: none;text-align: inherit;}#text12 {text-transform: none;}#text19 {text-transform: none;}#text22 {font-size: 1.625em;font-weight: 400;text-transform: none;text-align: inherit;}#text23 {text-transform: none;}#text24 {font-size: 1.625em;font-weight: 400;text-transform: none;text-align: inherit;}#text25 {text-transform: none;}#text29 {font-size: 1.625em;font-weight: 400;text-transform: none;text-align: inherit;}#text20 {text-transform: none;}#text26 {text-transform: none;}#text27 {text-transform: none;}#text32 {font-size: 1.625em;font-weight: 400;text-transform: none;text-align: inherit;}#text28 {text-transform: none;}#text33 {text-transform: none;}#text05 {font-size: 1.625em;font-weight: 400;text-transform: none;text-align: inherit;}#text31 {text-transform: none;}#text30 {text-transform: none;}#credits {font-size: 0.8em;text-transform: none;text-align: inherit;cursor: default;margin-top: 1rem !important;}#credits a {text-decoration: underline;-moz-transition: opacity 0.25s ease;-webkit-transition: opacity 0.25s ease;-ms-transition: opacity 0.25s ease;transition: opacity 0.25s ease;opacity: 0.5;text-decoration: none !important;}#credits a:hover {text-decoration: none;opacity: 1;text-decoration: none !important;}h1, h2, h3, p {text-transform: uppercase;color: #FFFFFF;font-family: 'Source Sans Pro';letter-spacing: 0.05rem;width: calc(100% + 0.05rem);font-size: 1.125em;line-height: 1.625;font-weight: 200;text-align: left;}hr {width: 100%;position: relative;padding: 0;border: 0;height: 0.5rem;line-height: 0.5rem;}hr:before {content: '';display: inline-block;vertical-align: middle;width: 16%;background-color: #FFFFFF;height: 2px;}.image {position: relative;overflow: hidden;max-width: 100%;display: block;}.image a, .image span {position: relative;max-width: 100%;display: inline-block;vertical-align: top;}.image a img, .image span img {display: block;}.image img {width: 100%;max-width: 100%;display: inline-block;vertical-align: top;}.image.full img {display: block;}.image.full:first-child img {border-top-left-radius: inherit;border-top-right-radius: inherit;}.image.full:last-child img {border-bottom-left-radius: inherit;border-bottom-right-radius: inherit;}.image.full a, .image.full span {display: block;}#image05 img {width: 26rem;}#image02 img {width: 94rem;}#image03 img {width: 94rem;}#image04 img {width: 94rem;}#image01 img {width: 19rem;}#image06 img {width: 46rem;}.gallery .inner {display: inline-block;max-width: 100%;max-width: 100rem;}.gallery ul li {display: inline-block;margin: 0.5rem;}.gallery ul li a, .gallery ul li span {display: inline-block;position: relative;border-radius: 0rem;}.gallery ul li img {display: inline-block;width: auto;max-width: 100%;margin: 0;vertical-align: top;height: auto;max-height: 18rem;border-radius: 0rem;}.gallery ul {padding: 1.575rem 0;width: calc(100% + 1rem);margin-left: -0.5rem;}@media (max-width: 1680px) {html {font-size: 13pt;}}@media (max-width: 1280px) {html {font-size: 13pt;}}@media (max-width: 980px) {html {font-size: 11pt;}}@media (max-width: 736px) {html {font-size: 11pt;}#main > .inner {padding: 3.5rem 2rem;}#main > .inner > * {margin-top: 1.5rem;margin-bottom: 1.5rem;}#main > .inner > .full {margin-left: calc(-2rem);width: calc(100% + 4rem + 0.4725px);max-width: calc(100% + 4rem + 0.4725px);}#main > .inner > .full:first-child {margin-top: -3.5rem !important;}#main > .inner > .full:last-child {margin-bottom: -3.5rem !important;}#main > .inner > .full.screen {margin-left: -50vw;}#text02 {font-size: 3em;}#divider01 {height: 0.5rem;line-height: 0.5rem;}#image05 img {width: 26rem;}#image02 img {width: 94rem;}#image03 img {width: 94rem;}#image04 img {width: 94rem;}#image01 img {width: 19rem;}#image06 img {width: 46rem;}}@media (max-width: 480px) {#main > .inner > * {margin-top: 1.3125rem;margin-bottom: 1.3125rem;}}@media (max-width: 360px) {#main > .inner {padding: 2.625rem 1.5rem;}#main > .inner > * {margin-top: 1.125rem;margin-bottom: 1.125rem;}#main > .inner > .full {margin-left: calc(-1.5rem);width: calc(100% + 3rem + 0.4725px);max-width: calc(100% + 3rem + 0.4725px);}#main > .inner > .full:first-child {margin-top: -2.625rem !important;}#main > .inner > .full:last-child {margin-bottom: -2.625rem !important;}#main > .inner > .full.screen {margin-left: -50vw;}#text14 {font-size: 1.5em;}#text06 {font-size: 1.5em;}#text04 {font-size: 1.5em;}#text16 {font-size: 1.5em;}#text11 {font-size: 1.5em;}#text17 {font-size: 1.5em;}#text21 {font-size: 1.5em;}#text22 {font-size: 1.5em;}#text24 {font-size: 1.5em;}#text29 {font-size: 1.5em;}#text32 {font-size: 1.5em;}#text05 {font-size: 1.5em;}#gallery04 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery04 ul li {margin: 0.375rem;}#gallery05 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery05 ul li {margin: 0.375rem;}#gallery01 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery01 ul li {margin: 0.375rem;}#gallery02 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery02 ul li {margin: 0.375rem;}#gallery03 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery03 ul li {margin: 0.375rem;}#gallery06 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery06 ul li {margin: 0.375rem;}#gallery07 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery07 ul li {margin: 0.375rem;}#gallery08 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery08 ul li {margin: 0.375rem;}#gallery09 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery09 ul li {margin: 0.375rem;}#gallery11 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery11 ul li {margin: 0.375rem;}#gallery12 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery12 ul li {margin: 0.375rem;}#gallery13 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery13 ul li {margin: 0.375rem;}#gallery10 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery10 ul li {margin: 0.375rem;}#gallery14 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery14 ul li {margin: 0.375rem;}#gallery15 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery15 ul li {margin: 0.375rem;}}</style><noscript>&amp;lt;style&amp;gt;body {overflow: auto !important;}body:after {display: none !important;}#main &amp;gt; .inner {opacity: 1.0 !important;}#main {opacity: 1.0 !important;-moz-transform: none !important;-webkit-transform: none !important;-ms-transform: none !important;transform: none !important;-moz-transition: none !important;-webkit-transition: none !important;-ms-transition: none !important;transition: none !important;-moz-filter: none !important;-webkit-filter: none !important;-ms-filter: none !important;filter: none !important;}&amp;lt;/style&amp;gt;</noscript><style></style><style></style><style></style></head><body class="is-ready"><div id="wrapper"><div id="main"><div class="inner"><h1 id="text02">Project 6 - Image Stitching</h1><h2 id="text14">Ankit Mathur</h2><hr id="divider01"><p id="text01">In this project, we focused on stitching images together by finding homographies to map points from the space of one image to the space of another image. Then, we transform these images to lie in the same plane and are able to show these side by side after performing some blending.</p><h3 id="text06">Homographies</h3><p id="text10"><span>In order to compute the matrix for the homography, we can start by noting that the equation for the transformation is p' = Hp. Since our points are only in 2 dimensions, we can ignore the fact that we have a third row by using the last element of that row as a scaling factor. Then, we need to solve for the other eight elements in the matrix.</span><br> <br> <span>To do that, we expand the equations here:</span></p><div class="image" id="image05"><img src="./proj6_files/image05.jpg" alt=""></div><h3 id="text04">Rectification</h3><p id="text09"><span>Here, we need to test the homographies that we have made so far. Therefore, we test this by picking a bounding box over an object and calling the warp function in order to change the perceived shape/orientation of the object. We do this simply by calling warp.</span><br> <br> <span>Here are some examples:</span></p><div class="gallery" id="gallery04"><div class="inner"><ul><li><img src="./proj6_files/01.jpg" alt="Untitled"></li><li><img src="./proj6_files/02.jpg" alt="Untitled"></li></ul></div></div><div class="gallery" id="gallery05"><div class="inner"><ul><li><img src="./proj6_files/01(1).jpg" alt="Untitled"></li><li><img src="./proj6_files/02(1).jpg" alt="Untitled"></li></ul></div></div><h3 id="text16">Mosaics</h3><p id="text08">GBC</p><div class="gallery" id="gallery01"><div class="inner"><ul><li><img src="./proj6_files/01(2).jpg" alt="Untitled"></li><li><img src="./proj6_files/02(2).jpg" alt="Untitled"></li><li><img src="./proj6_files/03.jpg" alt="Untitled"></li></ul></div></div><div class="image" id="image02"><span class="deferred" style="background-image: url(&quot;https://inst.eecs.berkeley.edu/~cs194-26/fa17/upload/files/proj6B/cs194-26-aey/index_files/_image02.png&quot;); background-size: 100%; background-position: left top; background-repeat: no-repeat;"><img src="./proj6_files/_image02.png" data-src="assets/images/image02.jpg?v43033399851151" alt="" style="opacity: 0; transition: opacity 0.375s ease-in-out;"></span></div><p id="text07">Gardens</p><div class="gallery" id="gallery02"><div class="inner"><ul><li><img src="./proj6_files/01(3).jpg" alt="Untitled"></li><li><img src="./proj6_files/02(3).jpg" alt="Untitled"></li><li><img src="./proj6_files/03(1).jpg" alt="Untitled"></li></ul></div></div><div class="image" id="image03"><span class="deferred" style="background-image: url(&quot;https://inst.eecs.berkeley.edu/~cs194-26/fa17/upload/files/proj6B/cs194-26-aey/index_files/_image03.png&quot;); background-size: 100%; background-position: left top; background-repeat: no-repeat;"><img src="./proj6_files/_image03.png" data-src="assets/images/image03.jpg?v43033399851151" alt="" style="opacity: 0; transition: opacity 0.375s ease-in-out;"></span></div><p id="text03">Telegraph</p><div class="gallery" id="gallery03"><div class="inner"><ul><li><img src="./proj6_files/01(4).jpg" alt="Untitled"></li><li><img src="./proj6_files/02(4).jpg" alt="Untitled"></li></ul></div></div><div class="image" id="image04"><img src="./proj6_files/image04.jpg" alt=""></div><p id="text15">As an additional note, in my code, I included a horizontal blending function which allowed me to get rid of black elements in the image that showed up from the stitching.</p><h2 id="text11">Part B: Automatic Stitching</h2><p id="text13">As an additional note, in my code, I included a horizontal blending function which allowed me to get rid of black elements in the image that showed up from the stitching.</p><h3 id="text17">Harris Corners</h3><p id="text18"><span>To detect corners, we use the Harris Corner Detection algorithm. The basic principle here is that we measure a response to a specific kind of function. Seeing a varied response to the function over some window indicates that it is likely that there is a corner in that location. Using this, we are able to detect the corners in the image. </span><br> <br> <span>Why is this even a good idea? It turns out that, more so than edges, corners provide great feature points for an image. Edges can change with perspective but corners remain in a somewhat fixed location.</span><br> <br> <span>In my implementation here, I set the minimum distance between the coordinates to be 10 instead of 1 because that was producing way too many points. </span><br> <br> <span>Here are a couple images that displays some of the outputs from this:</span></p><div class="gallery" id="gallery06"><div class="inner"><ul><li><img src="./proj6_files/01(5).jpg" alt="GBC Harris Corners"></li><li><img src="./proj6_files/02(5).jpg" alt="Garden Harris Corners"></li></ul></div></div><h3 id="text21">Adaptive Non-Maximal Suppression</h3><p id="text12"><span>One of the great contributions of the MOPS paper is the strategy for adaptive non-maximal suppression of harris corner points. Basically, we want to extract fewer points because the computation cost of matching is superlinear in the number of interest points. Furthermore, we want the points to be distributed well over the entire image so that we are likely to get matches to other images. If the points were all in a couple of places, that wouldn't really help. </span><br> <br> <span>While the paper is complex, all that really needs to be done here is to say that for every point, we find the minimum radius to the next feature point such that the corner response for the existing interest point is less than some constant multiplied by the response for the other point. In math this looks like this:</span></p><div class="image" id="image01"><img src="./proj6_files/image01.jpg" alt=""></div><p id="text19"><span>Then, we pick some number of interest points with the largest radius to the next significant feature point. What this means is that we retain the points with the strongest responses that are also far away from other strong points. This gives us a set of points that are well distributed and strong.</span><br> <br> <span>Here are those same images with the ANMS filtered points:</span></p><div class="gallery" id="gallery07"><div class="inner"><ul><li><img src="./proj6_files/01(6).jpg" alt="GBC ANMS"></li><li><img src="./proj6_files/02(6).jpg" alt="Garden ANMS"></li></ul></div></div><h3 id="text22">Extracting Features and Feature Matching</h3><p id="text23"><span>The next step once a filtered set of points has been filtered is to find actual patches of features. We look at 40x40 interest points, and we downsample those patches to be 8x8. This eliminates high frequency signal that interferes with the accurate matching of features. We don't want noise to interfere with the general feature that we want to match.</span><br> <br> <span>Furthermore, we bias/gain normalize the patches by subtracting the mean and dividing by the standard deviation. This makes our features invariant to overall intensity differences and an invariant shift to the distribution of RGB.</span><br> <br> <span>Then, we match the features by performing an SSD for each feature with every other feature. We compute a ratio of the 1-NN to the 2-NN. Intuitively, this allows us to pick only those matches that have a single good match, not multiple. We return matches that satisfy this ratio.</span></p><div class="gallery" id="gallery08"><div class="inner"><ul><li><img src="./proj6_files/01(7).jpg" alt="GBC 1 Features"></li><li><img src="./proj6_files/02(7).jpg" alt="GBC 2"></li></ul></div></div><div class="gallery" id="gallery09"><div class="inner"><ul><li><img src="./proj6_files/01(8).jpg" alt="Im1"></li><li><img src="./proj6_files/02(8).jpg" alt="im2"></li></ul></div></div><h3 id="text24">RANSAC</h3><p id="text25">Once we've computed these feature matches, we still have some outlier matches in the set. Therefore, we turn to the RANSAC method of estimation. Here, we choose 4 random points and compute an exact homography from them. After that, we compute the number of points that are inliers in this homography and keep the set with the largest homography. Probabilistically, it's likely that this process converges to the right set of points. Finally, we compute a new homography based on the largest set of inliers.</p><h3 id="text29">Auto-stitched Mosaics</h3><p id="text20">I wrote code to automatically stitch multi-image panoramas together. Here are 3 of those (the first stitches 3 images together). The best result in my opinion is the one of GBC.</p><p id="text26">Results: (automatic first, then manual)</p><div class="gallery" id="gallery11"><div class="inner"><ul><li><img src="./proj6_files/01(9).jpg" alt="Automatically Stitched"></li><li><img src="./proj6_files/02(9).jpg" alt="Manually"></li></ul></div></div><div class="gallery" id="gallery12"><div class="inner"><ul><li><img src="./proj6_files/01(10).jpg" alt="Auto"></li><li><img src="./proj6_files/02(10).jpg" alt="Manual"></li></ul></div></div><div class="gallery" id="gallery13"><div class="inner"><ul><li><img src="./proj6_files/01(11).jpg" alt="Auto"></li><li><img src="./proj6_files/02(11).jpg" alt="Untitled"></li></ul></div></div><p id="text27">Other nice results:</p><div class="gallery" id="gallery10"><div class="inner"><ul><li><img src="./proj6_files/01(12).jpg" alt="treeline"></li><li><img src="./proj6_files/02(12).jpg" alt="Sather"></li></ul></div></div><h3 id="text32">Bells and Whistles: Panorama Identification</h3><p id="text28"><span>The strategy that we need to take here is to compute features for each of the images and by that process compute the pairwise homographies. The homography encompasses all of the different kinds of transformations that a panorama can undergo. After computing the homographies, we use RANSAC to determine the outliers and the inliers. From this, assuming a Bernoulli independence assumption for the probability that each outlier is actually an outlier, we compute a probability of whether an image is a match (by thresholding the computed probability with Bayes rule). A K-nearest-neighbor approach for identifying matching features is also proposed. </span><br> <br> <span>This approach is proposed by Brown and Lowe in 2003 in Panorama Identification. </span><br> <br> <span>My implementation does not use the K-nearest-neighbor approach. Instead, it computes feature matches and the computes the pairwise homography. We then use the largest inlier set to compute the match probability and add it to the success set if it passes the threshold.</span><br> <br> <span>The experiment I conduced involved taking my existing best 3 mosaics and putting them into a list. The goal was to have the 3 mosaics be detected as a set. In other words, if I had images 1,2,3, I <strong>required</strong> that I get the tuples (1,2) and (2,3), but I was also fine with the tuple (1,3) because some of the images were taken so close together that there would be matching features across multiple.</span><br> <br> <span>My results worked out well (with some noise):</span></p><div class="image" id="image06"><img src="./proj6_files/image06.jpg" alt=""></div><p id="text33">Observe here how there are some elements which are wrong (2,13) gets a match and so does (9, 13). However, the rest of the sets match perfectly, and the generated mosaics were the same ones I had above!</p><h3 id="text05">Bells and Whistles: Rotation Invariance</h3><p id="text31"><span>It took me some time to understand what exactly needed to be done here, but what I eventually arrived at was that to make something rotation invariant, we actually needed to change the feature at the time of creation. </span><br> <br> <span>A concept that implicitly encodes the rotation is the angle of the gradient. Therefore, we compute the angle of the gradient in both directions (x and y).</span><br> <br> <span>Then, we use our knowledge of geometry to compute the angle of the gradient, which is <code>arctan2(y,x)</code>. Then, we rotate every feature such that its gradient is at 0 degrees by rotating the feature patch by this angle. </span><br> <br> <span>If we do this to all features we compute, then we have features that are rotation invariant (they all have the same gradient angle after transformation).</span><br> <br> <span>Here, on the left in the first gallery, I have the original feature. I call my rotation invariance feature on it, and I get the invariant version.</span><br> <br> <span>In the next gallery, I have the original feature rotated by 45 degrees. Calling the rotation invariance function returns the same feature!</span></p><div class="gallery" id="gallery14"><div class="inner"><ul><li><img src="./proj6_files/01(13).jpg" alt="without_rotation"></li><li><img src="./proj6_files/02(13).jpg" alt="invariant"></li></ul></div></div><div class="gallery" id="gallery15"><div class="inner"><ul><li><img src="./proj6_files/01(14).jpg" alt="45_degree"></li><li><img src="./proj6_files/02(14).jpg" alt="invariant"></li></ul></div></div><p id="text30">The most interesting thing I learned in this project was definitely RANSAC. It was refreshing to learn a new regression technique that was targeted at the weaknesses of least squares.</p><p id="credits"><a href="https://carrd.co/">( Made with Carrd )</a></p></div></div></div><script>var on = addEventListener,$ = function(q) { return document.querySelector(q) },$$ = function(q) { return document.querySelectorAll(q) },$body = document.body,$inner = $('.inner'),client = (function() {var o = {browser: 'other',browserVersion: 0,os: 'other',osVersion: 0},ua = navigator.userAgent,a, i;a = [['firefox', /Firefox\/([0-9\.]+)/],['edge', /Edge\/([0-9\.]+)/],['safari', /Version\/([0-9\.]+).+Safari/],['chrome', /Chrome\/([0-9\.]+)/],['ie', /Trident\/.+rv:([0-9]+)/]];for (i=0; i < a.length; i++) {if (ua.match(a[i][1])) {o.browser = a[i][0];o.browserVersion = parseFloat(RegExp.$1);break;}}a = [['ios', /([0-9_]+) like Mac OS X/, function(v) { return v.replace('_', '.').replace('_', ''); }],['ios', /CPU like Mac OS X/, function(v) { return 0 }],['android', /Android ([0-9\.]+)/, null],['mac', /Macintosh.+Mac OS X ([0-9_]+)/, function(v) { return v.replace('_', '.').replace('_', ''); }],['windows', /Windows NT ([0-9\.]+)/, null]];for (i=0; i < a.length; i++) {if (ua.match(a[i][1])) {o.os = a[i][0];o.osVersion = parseFloat( a[i][2] ? (a[i][2])(RegExp.$1) : RegExp.$1 );break;}}return o;}()),trigger = function(t) {if (client.browser == 'ie') {var e = document.createEvent('Event');e.initEvent(t, false, true);dispatchEvent(e);} else dispatchEvent(new Event(t));};on('load', function() {setTimeout(function() {$body.className = $body.className.replace(/\bis-loading\b/, 'is-playing');setTimeout(function() {$body.className = $body.className.replace(/\bis-playing\b/, 'is-ready');}, 1500);}, 100);});var style, sheet, rule;style = document.createElement('style');style.appendChild(document.createTextNode(''));document.head.appendChild(style);sheet = style.sheet;if (client.os == 'android') {(function() {sheet.insertRule('body::after { }', 0);rule = sheet.cssRules[0];var f = function() {rule.style.cssText = 'height: ' + (Math.max(screen.width, screen.height)) + 'px';};on('load', f);on('orientationchange', f);on('touchmove', f);})();} else  if (client.os == 'ios') {(function() {sheet.insertRule('body::after { }', 0);rule = sheet.cssRules[0];rule.style.cssText = '-webkit-transform: scale(1.0)';})();(function() {sheet.insertRule('body.ios-focus-fix::before { }', 0);rule = sheet.cssRules[0];rule.style.cssText = 'height: calc(100% + 60px)';on('focus', function(event) {$body.classList.add('ios-focus-fix');}, true);on('blur', function(event) {$body.classList.remove('ios-focus-fix');}, true);})();} else  if (client.browser == 'ie') {(function() {var t, f;f = function() {var mh, h, s, xx, x, i;x = $('#wrapper');x.style.height = 'auto';if (x.scrollHeight <= innerHeight)x.style.height = '100vh';xx = $$('.container.full');for (i=0; i < xx.length; i++) {x = xx[i];s = getComputedStyle(x);x.style.minHeight = '';x.style.height = '';mh = s.minHeight;x.style.minHeight = 0;x.style.height = '';h = s.height;if (mh == 0)continue;x.style.height = (h > mh ? 'auto' : mh);}};(f)();on('resize', function() {clearTimeout(t);t = setTimeout(f, 250);});on('load', f);})();}(function() {var items = $$('.deferred'),f;if (!('forEach' in NodeList.prototype))NodeList.prototype.forEach = Array.prototype.forEach;items.forEach(function(p) {var i = p.firstChild;p.style.backgroundImage = 'url(' + i.src + ')';p.style.backgroundSize = '100% auto';p.style.backgroundPosition = 'top left';p.style.backgroundRepeat = 'no-repeat';i.style.opacity = 0;i.style.transition = 'opacity 0.375s ease-in-out';i.addEventListener('load', function(event) {if (i.dataset.src !== 'done')return;if (Date.now() - i._startLoad < 375) {p.classList.remove('loading');p.style.backgroundImage = 'none';i.style.transition = '';i.style.opacity = 1;} else  {p.classList.remove('loading');i.style.opacity = 1;setTimeout(function() {p.style.backgroundImage = 'none';}, 375);}});});f = function() {var height = document.documentElement.clientHeight,top = (client.os == 'ios' ? document.body.scrollTop : document.documentElement.scrollTop),bottom = top + height;items.forEach(function(p) {var i = p.firstChild;if (i.offsetParent === null)return true;if (i.dataset.src === 'done')return true;var x = i.getBoundingClientRect(),imageTop = top + Math.floor(x.top) - height,imageBottom = top + Math.ceil(x.bottom) + height,src;if (imageTop <= bottom && imageBottom >= top) {src = i.dataset.src;i.dataset.src = 'done';p.classList.add('loading');i._startLoad = Date.now();i.src = src;}});};on('load', f);on('resize', f);on('scroll', f);})();</script></body></html>