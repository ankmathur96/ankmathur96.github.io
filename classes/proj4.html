<!DOCTYPE html>
<!-- saved from url=(0078)https://inst.eecs.berkeley.edu/~cs194-26/fa17/upload/files/proj4/cs194-26-aey/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Ankit Mathur - Project 4</title><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="description" content="Project 4"><meta property="og:site_name" content="Ankit Mathur - Project 4"><meta property="og:title" content="Ankit Mathur - Project 4"><meta property="og:type" content="article"><meta property="og:image" content="https://ankitmathur.carrd.co/assets/images/card.jpg?v66062951848051"><meta property="og:description" content="Project 4"><meta property="og:url" content="https://ankitmathur.carrd.co"><meta property="twitter:card" content="summary_large_image"><link href="./proj4_files/css" rel="stylesheet" type="text/css"><style>html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-collapse:collapse;border-spacing:0;}body{-webkit-text-size-adjust:none}mark{background-color:transparent;color:inherit}input::-moz-focus-inner{border:0;padding:0}input[type="text"],input[type="email"],select,textarea{-moz-appearance:none;-webkit-appearance:none;-ms-appearance:none;appearance:none}*, *:before, *:after {box-sizing: border-box;}body {min-width: 320px;min-height: 100vh;line-height: 1.0;word-wrap: break-word;overflow-x: hidden;}strong {color: inherit;font-weight: bolder;}em {font-style: italic;}code {font-family: "Lucida Console", "Courier New", monospace;font-weight: normal;text-indent: 0;letter-spacing: 0;font-size: 0.9em;margin: 0 0.25em;padding: 0.25em 0.5em;background-color: rgba(144,144,144,0.25);border-radius: 0.25em;}mark {background-color: rgba(144,144,144,0.25);}a {-moz-transition: color 0.25s ease, background-color 0.25s ease, border-color 0.25s ease;-webkit-transition: color 0.25s ease, background-color 0.25s ease, border-color 0.25s ease;-ms-transition: color 0.25s ease, background-color 0.25s ease, border-color 0.25s ease;transition: color 0.25s ease, background-color 0.25s ease, border-color 0.25s ease;color: inherit;text-decoration: underline;}s {text-decoration: line-through;}body:before {content: '';display: block;background-image: linear-gradient(45deg, #503157 33%, #045359 100%);position: fixed;top: 0;left: 0;width: 100vw;height: 100vh;z-index: 0;-moz-pointer-events: none;-webkit-pointer-events: none;-ms-pointer-events: none;pointer-events: none;-moz-transform: scale(1);-webkit-transform: scale(1);-ms-transform: scale(1);transform: scale(1);}body:after {display: block;content: '';position: fixed;top: 0;left: 0;width: 100%;height: 100%;background-color: #045359;z-index: 1;opacity: 0;visibility: hidden;-moz-transition: opacity 1s ease-in-out 0s, visibility 1s 0s;-webkit-transition: opacity 1s ease-in-out 0s, visibility 1s 0s;-ms-transition: opacity 1s ease-in-out 0s, visibility 1s 0s;transition: opacity 1s ease-in-out 0s, visibility 1s 0s;-moz-transform: scale(1);-webkit-transform: scale(1);-ms-transform: scale(1);transform: scale(1);}body.is-loading:after {opacity: 1;visibility: visible;}html {font-size: 18pt;}#wrapper {-webkit-overflow-scrolling: touch;display: -moz-flex;display: -webkit-flex;display: -ms-flex;display: flex;-moz-flex-direction: column;-webkit-flex-direction: column;-ms-flex-direction: column;flex-direction: column;-moz-align-items: center;-webkit-align-items: center;-ms-align-items: center;align-items: center;-moz-justify-content: center;-webkit-justify-content: center;-ms-justify-content: center;justify-content: center;min-height: 100vh;position: relative;z-index: 2;overflow: hidden;}#main {display: -moz-flex;display: -webkit-flex;display: -ms-flex;display: flex;position: relative;max-width: 100%;z-index: 1;-moz-align-items: center;-webkit-align-items: center;-ms-align-items: center;align-items: center;-moz-justify-content: center;-webkit-justify-content: center;-ms-justify-content: center;justify-content: center;-moz-flex-grow: 0;-webkit-flex-grow: 0;-ms-flex-grow: 0;flex-grow: 0;-moz-flex-shrink: 0;-webkit-flex-shrink: 0;-ms-flex-shrink: 0;flex-shrink: 0;text-align: center;-moz-transition: opacity 2s ease 0s,-moz-transform 2s ease 0s;-webkit-transition: opacity 2s ease 0s,-webkit-transform 2s ease 0s;-ms-transition: opacity 2s ease 0s,-ms-transform 2s ease 0s;transition: opacity 2s ease 0s,transform 2s ease 0s;}#main > .inner {position: relative;z-index: 1;border-radius: inherit;padding: 1.25rem 1rem;max-width: 100%;width: 40rem;}#main > .inner > * {margin-top: 1.375rem;margin-bottom: 1.375rem;}#main > .inner > :first-child {margin-top: 0 !important;}#main > .inner > :last-child {margin-bottom: 0 !important;}#main > .inner > .full {margin-left: calc(-1rem);width: calc(100% + 2rem + 0.4725px);max-width: calc(100% + 2rem + 0.4725px);}#main > .inner > .full:first-child {margin-top: -1.25rem !important;border-top-left-radius: inherit;border-top-right-radius: inherit;}#main > .inner > .full:last-child {margin-bottom: -1.25rem !important;border-bottom-left-radius: inherit;border-bottom-right-radius: inherit;}#main > .inner > .full.screen {width: 100vw;max-width: 100vw;position: relative;border-radius: 0 !important;left: 50%;right: auto;margin-left: -50vw;}body.is-loading #main {opacity: 0;-moz-transform: scale(0.975);-webkit-transform: scale(0.975);-ms-transform: scale(0.975);transform: scale(0.975);}.image {position: relative;overflow: hidden;max-width: 100%;display: block;}.image a, .image span {position: relative;max-width: 100%;display: inline-block;vertical-align: top;}.image a img, .image span img {display: block;}.image img {width: 100%;max-width: 100%;display: inline-block;vertical-align: top;}.image.full img {display: block;}.image.full:first-child img {border-top-left-radius: inherit;border-top-right-radius: inherit;}.image.full:last-child img {border-bottom-left-radius: inherit;border-bottom-right-radius: inherit;}.image.full a, .image.full span {display: block;}#image01 a, #image01 span {border-radius: 100%;}#image01 img {width: 9rem;border-radius: 100%;}#image02 img {width: 16rem;}h1 br + br, h2 br + br, h3 br + br, p br + br {display: block;content: ' ';margin-top: 0.975rem;}h1 .li, h2 .li, h3 .li, p .li {display: list-item;padding-left: 0.5em;margin: 0.75em 0 0 1em;}#text09 br + br {margin-top: 0.75rem;}#text09 {color: #18E3F3;letter-spacing: 0.45rem;width: calc(100% + 0.45rem);font-size: 2.25em;line-height: 1.25;text-align: inherit;}#text04 br + br {margin-top: 0.9rem;}#text04 {font-size: 1.25em;line-height: 1.5;text-transform: none;letter-spacing: 0;width: auto;text-align: inherit;}#text03 br + br {margin-top: 0.75rem;}#text03 {color: #18E3F3;font-size: 2em;line-height: 1.25;text-transform: none;text-align: inherit;}#text02 {text-transform: none;letter-spacing: 0;width: auto;}#text05 br + br {margin-top: 0.75rem;}#text05 {color: #18E3F3;font-size: 2em;line-height: 1.25;text-transform: none;text-align: inherit;}#text06 {text-transform: none;letter-spacing: 0;width: auto;}#text07 {text-transform: none;letter-spacing: 0;width: auto;}#text10 {text-transform: none;letter-spacing: 0;width: auto;}#text12 {font-weight: 400;text-transform: none;letter-spacing: 0;width: auto;}#text11 {font-weight: 600;text-transform: none;letter-spacing: 0;width: auto;}#text13 {text-transform: none;letter-spacing: 0;width: auto;}#text14 {text-transform: none;letter-spacing: 0;width: auto;}#text20 {font-weight: 600;text-transform: none;letter-spacing: 0;width: auto;}#text21 {font-weight: 600;text-transform: none;letter-spacing: 0;width: auto;}#text01 br + br {margin-top: 0.75rem;}#text01 {color: #18E3F3;font-size: 2em;line-height: 1.25;text-transform: none;text-align: inherit;}#text15 {text-transform: none;letter-spacing: 0;width: auto;}#text16 {text-transform: none;letter-spacing: 0;width: auto;}#text08 br + br {margin-top: 0.75rem;}#text08 {color: #18E3F3;font-size: 2em;line-height: 1.25;text-transform: none;text-align: inherit;}#text17 {text-transform: none;letter-spacing: 0;width: auto;}#text18 {text-transform: none;letter-spacing: 0;width: auto;}#text19 br + br {margin-top: 0.75rem;}#text19 {color: #18E3F3;font-size: 2em;line-height: 1.25;text-transform: none;text-align: inherit;}h1, h2, h3, p {text-transform: uppercase;color: #FFFFFF;font-family: 'Source Sans Pro';letter-spacing: 0.125rem;width: calc(100% + 0.125rem);font-size: 1em;line-height: 1.625;font-weight: 200;text-align: left;}.gallery .inner {display: inline-block;max-width: 100%;max-width: 100rem;}.gallery ul li {display: inline-block;margin: 0.5rem;}.gallery ul li a, .gallery ul li span {display: inline-block;position: relative;border-radius: 0rem;}.gallery ul li img {display: inline-block;width: auto;max-width: 100%;margin: 0;vertical-align: top;height: auto;max-height: 13.875rem;border-radius: 0rem;}#gallery01 ul {padding: 1.203125rem 0;}#gallery01 ul li img {max-height: 13.75rem;}#gallery09 ul {padding: 1.203125rem 0;}#gallery09 ul li img {max-height: 13.75rem;}#gallery08 ul {padding: 1.203125rem 0;}#gallery08 ul li img {max-height: 13.75rem;}#gallery04 ul {padding: 1.203125rem 0;}#gallery04 ul li img {max-height: 13.75rem;}.gallery ul {padding: 1.2140625rem 0;width: calc(100% + 1rem);margin-left: -0.5rem;}.video {position: relative;}.video video {display: inline-block;vertical-align: top;max-width: 100%;}.video .frame {position: relative;overflow: hidden;max-width: 100%;display: inline-block;vertical-align: top;}.video .frame:before {content: '';display: block;width: 100%;}.video .frame iframe {position: absolute;top: 0px;right: 0px;bottom: 0px;left: 0px;width: 100%;height: 100%;background-color: rgba(32,32,32,0.25);}.video.full video {display: block;}.video.full:first-child video {border-top-left-radius: inherit;border-top-right-radius: inherit;}.video.full:last-child video {border-bottom-left-radius: inherit;border-bottom-right-radius: inherit;}.video.full .frame {display: block;}.video.full:first-child .frame {border-top-left-radius: inherit;border-top-right-radius: inherit;}.video.full:last-child .frame {border-bottom-left-radius: inherit;border-bottom-right-radius: inherit;}#video01 video {width: 20rem;}#video01 .frame {width: 20rem;}#video01 .frame:before {padding-top: 56.25%;}#video02 video {width: 20rem;}#video02 .frame {width: 20rem;}#video02 .frame:before {padding-top: 56.25%;}#video03 video {width: 20rem;}#video03 .frame {width: 20rem;}#video03 .frame:before {padding-top: 56.25%;}@media (max-width: 1680px) {html {font-size: 13pt;}}@media (max-width: 1280px) {html {font-size: 13pt;}}@media (max-width: 980px) {html {font-size: 11pt;}}@media (max-width: 736px) {html {font-size: 11pt;}#main > .inner {padding: 1.25rem 1rem;}#main > .inner > * {margin-top: 1.375rem;margin-bottom: 1.375rem;}#main > .inner > .full {margin-left: calc(-1rem);width: calc(100% + 2rem + 0.4725px);max-width: calc(100% + 2rem + 0.4725px);}#main > .inner > .full:first-child {margin-top: -1.25rem !important;}#main > .inner > .full:last-child {margin-bottom: -1.25rem !important;}#main > .inner > .full.screen {margin-left: -50vw;}#image01 img {width: 9rem;}#image02 img {width: 16rem;}#video01 video {width: 20rem;}#video01 .frame {width: 20rem;}#video02 video {width: 20rem;}#video02 .frame {width: 20rem;}#video03 video {width: 20rem;}#video03 .frame {width: 20rem;}}@media (max-width: 480px) {#main > .inner > * {margin-top: 1.203125rem;margin-bottom: 1.203125rem;}}@media (max-width: 360px) {#main > .inner {padding: 0.9375rem 0.75rem;}#main > .inner > * {margin-top: 1.03125rem;margin-bottom: 1.03125rem;}#main > .inner > .full {margin-left: calc(-0.75rem);width: calc(100% + 1.5rem + 0.4725px);max-width: calc(100% + 1.5rem + 0.4725px);}#main > .inner > .full:first-child {margin-top: -0.9375rem !important;}#main > .inner > .full:last-child {margin-bottom: -0.9375rem !important;}#main > .inner > .full.screen {margin-left: -50vw;}#text09 {font-size: 2em;}#text03 {font-size: 1.5em;}#text05 {font-size: 1.5em;}#text01 {font-size: 1.5em;}#text08 {font-size: 1.5em;}#text19 {font-size: 1.5em;}#gallery01 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery01 ul li {margin: 0.375rem;}#gallery09 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery09 ul li {margin: 0.375rem;}#gallery02 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery02 ul li {margin: 0.375rem;}#gallery03 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery03 ul li {margin: 0.375rem;}#gallery08 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery08 ul li {margin: 0.375rem;}#gallery04 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery04 ul li {margin: 0.375rem;}#gallery05 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery05 ul li {margin: 0.375rem;}#gallery06 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery06 ul li {margin: 0.375rem;}#gallery07 ul {width: calc(100% + 0.75rem);margin-left: -0.375rem;}#gallery07 ul li {margin: 0.375rem;}}</style><noscript>&amp;lt;style&amp;gt;body {overflow: auto !important;}body:after {display: none !important;}#main &amp;gt; .inner {opacity: 1.0 !important;}#main {opacity: 1.0 !important;-moz-transform: none !important;-webkit-transform: none !important;-ms-transform: none !important;transform: none !important;-moz-transition: none !important;-webkit-transition: none !important;-ms-transition: none !important;transition: none !important;-moz-filter: none !important;-webkit-filter: none !important;-ms-filter: none !important;filter: none !important;}#main &amp;gt; .inner &amp;gt; section {opacity: 1.0 !important;-moz-transform: none !important;-webkit-transform: none !important;-ms-transform: none !important;transform: none !important;-moz-transition: none !important;-webkit-transition: none !important;-ms-transition: none !important;transition: none !important;-moz-filter: none !important;-webkit-filter: none !important;-ms-filter: none !important;filter: none !important;}&amp;lt;/style&amp;gt;</noscript><style></style><style></style><style></style></head><body class="is-ready"><div id="wrapper"><div id="main"><div class="inner"><div class="image" id="image01"><img src="./proj4_files/image01.jpg" alt=""></div><h1 id="text09">Project 4 - Face Morphing</h1><p id="text04">By Ankit Mathur</p><h2 id="text03">Face Morphing</h2><p id="text02"><span>In order to morph a face to another, we first need to annotate each face with correspondences that we are able to define manually through our existing knowledge about humans. These annotations provide the algorithm with a set of correspondences between different feature elements on the faces of these individuals. The first thing to do is to define a function that is able to warp the shape of the correspondences into one "average" shape. In fact, this does not always have to be an average - it can just be a weighted average of the two images that one is trying to morph. This allows for the shape warping to be more influenced by one face's shape than the other.</span><br> <br> <span>Once we have an average shape, we transform this set of points into a triangulation using the Delaunay algorithm.</span><br> <br> <span>Now, to generate the mean face, we need to do an inverse mapping from points in both images to points in the space of the average shape. This allows us to create an image that maps to the weighted average shape that we have computed. Starting with an zeros matrix, we now have to fill up the matrix with pixel values. To do this, in order to compute the inverse mapping, we need to find matrices that map pixels in the triangles of the original images to their corresponding points in the triangles of the average shape.</span><br> <br> <span>We model these transformations as affine transformations. To compute the inverse mapping, if points in the average triangles are P' and the points in the morphed images are P, then we have AP' = P, so A = PP'^{-1}. </span><br> <br> <span>The value of the pixel in the morphed image is then a weighted average of the two images.</span></p><div class="gallery" id="gallery01"><div class="inner"><ul><li><img src="./proj4_files/01.jpg" alt="Untitled"></li><li><img src="./proj4_files/02.jpg" alt="Untitled"></li><li><img src="./proj4_files/03.jpg" alt="Untitled"></li></ul></div></div><div class="video" id="video01"><video src="index_files/clooneyvid.mp4" poster="index_files/clooneyvid.mp4" playsinline="" autoplay="" loop=""></video></div><div class="gallery" id="gallery09"><div class="inner"><ul><li><img src="./proj4_files/01(1).jpg" alt="Untitled"></li><li><img src="./proj4_files/02(1).jpg" alt="Untitled"></li></ul></div></div><div class="video" id="video02"><video src="index_files/bollyvid.mp4" poster="index_files/bollyvid.mp4" playsinline="" autoplay="" loop=""></video></div><h2 id="text05">Average Face Dataset</h2><p id="text06"><span>Part 2 was an exploration of a larger dataset of faces, and for this, I used the dataset of Brazilian faces. I separated this dataset by gender, and the dataset came with a set of correspondences that were mapped across all the different faces in the dataset.</span><br> <br> <span>The process of computing the average shape of the dataset simply involves computing the average of the annotated points that are given to us. This provides the average mesh of the faces. The process of computing the average face is then very similar to the morphing process. A set of affine transformations for every triangle must be computed for every image. Then, the weighting of each image on the pixels in the morphed image is assigned to be even. Following the same Delaunay triangle process described in part 1, we are able to arrive at the mean face.</span><br> <br> <span>Finally, we can use this to compute morphs from members in the population to the average shape (and also other images, like yourself, to the average shape).</span></p><p id="text07">Mean face of the population (as computed using the method in the description):</p><div class="image" id="image02"><img src="./proj4_files/image02.jpg" alt="Average Color Image of the Brazilian Male"></div><p id="text10">I also selected a few of the members of the Brazilian population and morphed their faces to match the shape of the average face in the Brazilian male population:</p><p id="text12">Original:</p><div class="gallery" id="gallery02"><div class="inner"><ul><li><img src="./proj4_files/01(2).jpg" alt="Population Member 4"></li><li><img src="./proj4_files/02(2).jpg" alt="Population Member 6"></li><li><img src="./proj4_files/03(1).jpg" alt="Population Member 22"></li></ul></div></div><p id="text11">Morphed:</p><div class="gallery" id="gallery03"><div class="inner"><ul><li><img src="./proj4_files/01(3).jpg" alt="Morphed Member 4"></li><li><img src="./proj4_files/02(3).jpg" alt="Population Member 6"></li><li><img src="./proj4_files/03(2).jpg" alt="Population Member 21"></li></ul></div></div><p id="text13">Notice how the faces in the morphed versions are skewed in the direction of the shape that the average face provided. The average face was both long and a little bit wider. In particular, the second subject here was skewed outward to match this constraint.</p><p id="text14">In addition to this, I computed my face mapped to the structure of the mean face, along with the mean face mapped to the structure of my own face:</p><p id="text20">Originals:</p><div class="gallery" id="gallery08"><div class="inner"><ul><li><img src="./proj4_files/01(4).jpg" alt="Untitled"></li><li><img src="./proj4_files/02(4).jpg" alt="Untitled"></li></ul></div></div><p id="text21">Morphed to Each Other's Shape:</p><div class="gallery" id="gallery04"><div class="inner"><ul><li><img src="./proj4_files/01(5).jpg" alt="Self To Mean Face"></li><li><img src="./proj4_files/02(5).jpg" alt="Untitled"></li></ul></div></div><h2 id="text01">Caricatures</h2><p id="text15">To compute a caricature, we find the difference between the average image and my face's correspondence points. Then, this difference is subtracted from the points on the mean face. That creates a caricatured structure for the mean face. Then, we morph our own face to the caricatured structure that we have from the points in the mean face. We keep only color from our own image, and we keep some fractional amount of caricatured structure to determine how much of the caricature we want.</p><p id="text16">I caricatured myself with the average face of a Bollywood actor. As you can see, this emphasized my differences from the average actor: my nose is larger and twisted, and my face has expanded</p><div class="gallery" id="gallery05"><div class="inner"><ul><li><img src="./proj4_files/01(6).jpg" alt="Average Bollywood Face"></li><li><img src="./proj4_files/02(6).jpg" alt="Untitled"></li><li><img src="./proj4_files/03(3).jpg" alt="Untitled"></li></ul></div></div><h2 id="text08">Bells and Whistles: Changing Gender</h2><p id="text17">In order to change gender, I had to find the average face of a female population. Then, I had to morph myself into them by defining correspondence points on both my image and the image of the women. I did this by using the average face of a Bollywood actress.</p><div class="gallery" id="gallery06"><div class="inner"><ul><li><img src="./proj4_files/01(7).jpg" alt="Average Bollywood Actress"></li><li><img src="./proj4_files/02(7).jpg" alt="Self"></li></ul></div></div><p id="text18">Here, in order, we have the image of myself morphed to the shape of the womens' average faces, the image of the women morphed into the shape of me, and finally, an even blending between the two:</p><div class="gallery" id="gallery07"><div class="inner"><ul><li><img src="./proj4_files/01(8).jpg" alt="Shape Morphed"></li><li><img src="./proj4_files/02(8).jpg" alt="Color Morphed"></li><li><img src="./proj4_files/03(4).jpg" alt="Untitled"></li></ul></div></div><h2 id="text19">Bells and Whistles: Class Video</h2><div class="video" id="video03"><div class="frame"><iframe width="560" height="315" src="./proj4_files/CnP7fM7knQg.html" frameborder="0" allowfullscreen=""></iframe></div></div></div></div></div><script>var on = addEventListener,$ = function(q) { return document.querySelector(q) },$$ = function(q) { return document.querySelectorAll(q) },$body = document.body,$inner = $('.inner'),client = (function() {var o = {browser: 'other',browserVersion: 0,os: 'other',osVersion: 0},ua = navigator.userAgent,a, i;a = [['firefox', /Firefox\/([0-9\.]+)/],['edge', /Edge\/([0-9\.]+)/],['safari', /Version\/([0-9\.]+).+Safari/],['chrome', /Chrome\/([0-9\.]+)/],['ie', /Trident\/.+rv:([0-9]+)/]];for (i=0; i < a.length; i++) {if (ua.match(a[i][1])) {o.browser = a[i][0];o.browserVersion = parseFloat(RegExp.$1);break;}}a = [['ios', /([0-9_]+) like Mac OS X/, function(v) { return v.replace('_', '.').replace('_', ''); }],['ios', /CPU like Mac OS X/, function(v) { return 0 }],['android', /Android ([0-9\.]+)/, null],['mac', /Macintosh.+Mac OS X ([0-9_]+)/, function(v) { return v.replace('_', '.').replace('_', ''); }],['windows', /Windows NT ([0-9\.]+)/, null]];for (i=0; i < a.length; i++) {if (ua.match(a[i][1])) {o.os = a[i][0];o.osVersion = parseFloat( a[i][2] ? (a[i][2])(RegExp.$1) : RegExp.$1 );break;}}return o;}()),trigger = function(t) {if (client.browser == 'ie') {var e = document.createEvent('Event');e.initEvent(t, false, true);dispatchEvent(e);} else dispatchEvent(new Event(t));};on('load', function() {setTimeout(function() {$body.className = $body.className.replace(/\bis-loading\b/, 'is-playing');setTimeout(function() {$body.className = $body.className.replace(/\bis-playing\b/, 'is-ready');}, 2000);}, 100);});var style, sheet, rule;style = document.createElement('style');style.appendChild(document.createTextNode(''));document.head.appendChild(style);sheet = style.sheet;if (client.os == 'android') {(function() {sheet.insertRule('body::after { }', 0);rule = sheet.cssRules[0];var f = function() {rule.style.cssText = 'height: ' + (Math.max(screen.width, screen.height)) + 'px';};on('load', f);on('orientationchange', f);on('touchmove', f);})();} else  if (client.os == 'ios') {(function() {sheet.insertRule('body::after { }', 0);rule = sheet.cssRules[0];rule.style.cssText = '-webkit-transform: scale(1.0)';})();(function() {sheet.insertRule('body.ios-focus-fix::before { }', 0);rule = sheet.cssRules[0];rule.style.cssText = 'height: calc(100% + 60px)';on('focus', function(event) {$body.classList.add('ios-focus-fix');}, true);on('blur', function(event) {$body.classList.remove('ios-focus-fix');}, true);})();} else  if (client.browser == 'ie') {(function() {var t, f;f = function() {var mh, h, s, xx, x, i;x = $('#wrapper');x.style.height = 'auto';if (x.scrollHeight <= innerHeight)x.style.height = '100vh';xx = $$('.container.full');for (i=0; i < xx.length; i++) {x = xx[i];s = getComputedStyle(x);x.style.minHeight = '';x.style.height = '';mh = s.minHeight;x.style.minHeight = 0;x.style.height = '';h = s.height;if (mh == 0)continue;x.style.height = (h > mh ? 'auto' : mh);}};(f)();on('resize', function() {clearTimeout(t);t = setTimeout(f, 250);});on('load', f);})();}</script></body></html>